workflows:
  flutter-shorebird-deploy:
    name: Flutter Shorebird Deploy
    max_build_duration: 60
    environment:
      flutter: stable
      groups:
        - shorebird_credentials # Grupo contendo a variÃ¡vel SHOREBIRD_TOKEN
    working_directory: shorebird_example_flutter
    scripts:
      - name: Install dependencies
        script: |
          flutter --version
          flutter pub get
      - name: Install Shorebird CLI
        script: |
          dart pub global activate shorebird
          echo 'export PATH="$HOME/.shorebird/bin:$PATH"' >> $CM_ENV_FILE
          shorebird --version
      - name: Authenticate Shorebird
        script: |
          shorebird login --access-token "$SHOREBIRD_TOKEN"
      - name: Shorebird release for Android
        script: |
          shorebird release android
      - name: Shorebird release for iOS
        script: |
          shorebird release ios
    publishing:
      email:
        recipients:
          - "luisgustavodevbr@gmail.com"
